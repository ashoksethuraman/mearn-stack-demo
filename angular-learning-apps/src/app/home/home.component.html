<div class="container mt-5">
  <div class="shadow-lg rounded-3 p-4">
    <table class="table table-striped table-hover text-center align-middle">
      <thead class="table-primary">
        <tr>
          <th>NAME</th>
          <th>EMAIL</th>
          <th>PASSWORD</th>
          <th>DOB</th>
          <th>DOWNLOAD</th>
          <th>DELETE / UPDATE</th>
        </tr>
      </thead>
      <tbody>
        @if (paginatedData.length === 0) {
          <tr>
            <td colspan="6" class="text-muted text-center py-4">
              No data available
            </td>
          </tr>
        } @else {
          @for (user of paginatedData; track user._id; let i = $index) {
            <tr>
              <td>{{ user.name }}</td>
              <td>{{ user.email }}</td>
              <td>{{ user.password }}</td>
              <td>
                {{ user.dateOfBirth ? (user.dateOfBirth | date:'dd/MM/yyyy') : '' }}
              </td>
              <td>
                <button (click)="handleDownload(user)" class="btn btn-link text-primary p-0">
                  Download
                </button>
              </td>
              <td>
                <button class="btn btn-sm btn-outline-primary me-2" (click)="handleEdit(user)">Edit</button>
                <button class="btn btn-sm btn-outline-danger" (click)="handleDelete(user._id)">Delete</button>
              </td>
            </tr>
          }
        }
      </tbody>
    </table>

    <!-- Pagination -->
    <div class="d-flex justify-content-between align-items-center mt-3">
      <button (click)="goToPage(currentPage - 1)" [disabled]="currentPage === 1"
        class="btn btn-primary btn-sm">
        Previous
      </button>

      <ul class="pagination mb-0">
        @for (page of pages; track page) {
          <li class="page-item" [class.active]="currentPage === page">
            <button class="page-link" (click)="goToPage(page)">{{ page }}</button>
          </li>
        }
      </ul>

      <button (click)="goToPage(currentPage + 1)" [disabled]="currentPage === totalPages"
        class="btn btn-primary btn-sm">
        Next
      </button>
    </div>

    <div class="text-end text-muted mt-2 small">
      Page {{ currentPage }} of {{ totalPages }}
    </div>
  </div>
</div>
